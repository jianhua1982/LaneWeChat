!function(t){t(document).on("touchmove",function(t){t.preventDefault()}),t.fn.touchSlider=function(e){function n(t){q=!0;var e=Math.abs(f)/b,n=e>i.slidePercent?"0px":b*t+"px",o=m?{top:n}:{left:n},c=-b*t+"px",u=m?{top:c}:{left:c};s.eq(d+t).animate(o,250,"ease-in",function(){e>i.slidePercent?(s.eq(d).css(u).css("opacity",""),s.eq(d+t).css({transition:"","z-index":500}),d+=t,i.onMoveEnd(d)):s.eq(d).css("opacity",""),q=!1})}function o(t,e){s.eq(d).css("opacity",1-Math.abs(f)/b),s.eq(t).css(m?"top":"left",e+"px").css({"z-index":1e3})}var i=t.extend({},t.fn.touchSlider.defaults,e),c=this,s=c.find(i.itemSelector),u=c.css("position"),l=c.height(),a=c.width(),f=0,d=0,r=0,h=!1,p=!1,v=!1,x=!1,q=!1,m="v"==i.direction,b=m?l:a;return c.css({"background-color":"#000"}),"absolute"==u||"fixed"==u||c.css({position:"relative"}),s.each(function(t){s.eq(t).css({position:"absolute",top:m?l+"px":0,left:m?0:a+"px","z-index":"500"})}),s.eq(0).css(m?"top":"left",0),c.on("touchstart",function(t){var e=t.touches[0];r=m?e.clientY:e.clientX,f=0,h=!1,p=!1,v=!1,x=!1}).on("touchmove",function(t){var e=t.touches[0],n=m?e.clientY:e.clientX,i=n-r,c=0,u=0;f+=i,0>i&&!q&&(x=d!=s.length-1||h?!1:!0,h?(u=-b+f,c=0==d?d:d-1,o(c,u)):d===s.length-1||v||(u=b+f,c=d+1,o(c,u),p=!0)),i>0&&!q&&(v=0!=d||p?!1:!0,p?(u=b+f,c=d==s.length-1?d:d+1,o(c,u)):0===d||x||(u=-b+f,c=d-1,h=!0,o(c,u))),r=n}).on("touchend",function(){p&&n(1),h&&n(-1)}),this},t.fn.touchSlider.defaults={direction:"h",slidePercent:.3,itemSelector:"div",onMoveEnd:function(){}}}(Zepto);